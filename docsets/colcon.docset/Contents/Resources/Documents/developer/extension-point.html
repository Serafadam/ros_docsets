<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Extension points &mdash; colcon  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/colcon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributions" href="contribution.html" />
    <link rel="prev" title="Program flow" href="program-flow.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/colcon.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/quick-start.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/how-to.html">How to</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/what-is-a-workspace.html">What is a Workspace?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/log-files.html">Log Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/isolated-vs-merged-workspaces.html">Isolated vs Merged Workspaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/using-multiple-workspaces.html">Using Multiple Workspaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/overriding-packages.html">Overriding Packages</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/verb/build.html"><code class="docutils literal notranslate"><span class="pre">build</span></code> - Build Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/verb/edit.html"><code class="docutils literal notranslate"><span class="pre">edit</span></code> - Edit File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/verb/graph.html"><code class="docutils literal notranslate"><span class="pre">graph</span></code> - Visualize Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/verb/info.html"><code class="docutils literal notranslate"><span class="pre">info</span></code> - Show Package Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/verb/list.html"><code class="docutils literal notranslate"><span class="pre">list</span></code> - List Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/verb/metadata.html"><code class="docutils literal notranslate"><span class="pre">metadata</span></code> - Manage metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/verb/mixin.html"><code class="docutils literal notranslate"><span class="pre">mixin</span></code> - Manage mixins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/verb/test.html"><code class="docutils literal notranslate"><span class="pre">test</span></code> - Test Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/verb/test-result.html"><code class="docutils literal notranslate"><span class="pre">test-result</span></code> - Summarize Test Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/global-arguments.html">Global arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/executor-arguments.html">Executor arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/event-handler-arguments.html">Event handler arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/discovery-arguments.html">Discovery arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/package-selection-arguments.html">Package selection arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/mixin-arguments.html">Mixin arguments</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="bootstrap.html">Bootstrap from source</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">Environment setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="program-flow.html">Program flow</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Extension points</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#verbextensionpoint">VerbExtensionPoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packagediscoveryextensionpoint">PackageDiscoveryExtensionPoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packageidentificationextensionpoint">PackageIdentificationExtensionPoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packageaugmentationextensionpoint">PackageAugmentationExtensionPoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packageselectionextensionpoint">PackageSelectionExtensionPoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#taskextensionpoint">TaskExtensionPoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#executorextensionpoint">ExecutorExtensionPoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shellextensionpoint">ShellExtensionPoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#environmentextensionpoint">EnvironmentExtensionPoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#eventhandlerextensionpoint">EventHandlerExtensionPoint</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contribution.html">Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Make Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Migrate from other build tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../migration/ament_tools.html">ament_tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration/catkin_make_isolated.html">catkin_make_isolated</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration/catkin_tools.html">catkin_tools</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">colcon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Extension points</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developer/extension-point.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="extension-points">
<h1>Extension points<a class="headerlink" href="#extension-points" title="Permalink to this headline"></a></h1>
<p>The following describes some of the extension points and how they are used.</p>
<div class="section" id="verbextensionpoint">
<h2>VerbExtensionPoint<a class="headerlink" href="#verbextensionpoint" title="Permalink to this headline"></a></h2>
<p>This extension point is used by the <code class="docutils literal notranslate"><span class="pre">colcon</span></code> command.
Each verb extension defines custom logic which can be invoked by calling <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">&lt;verb&gt;</span></code>.
Each verb extension can add command line arguments to the verb specific subparser in <code class="docutils literal notranslate"><span class="pre">argparse</span></code>.</p>
</div>
<div class="section" id="packagediscoveryextensionpoint">
<h2>PackageDiscoveryExtensionPoint<a class="headerlink" href="#packagediscoveryextensionpoint" title="Permalink to this headline"></a></h2>
<p>This extension point is used by verb extensions.
Each package discovery extension can add command line arguments which are grouped in the “Discovery arguments” section of the usage help.
Each extension returns a set of package descriptors which identify a package with the tuple path, name, and type.
While a package discovery extension only provides candidate paths it uses the package identification extension point to determine if a path contains a package.</p>
<p>If explicit arguments are provided for any package discovery extensions only those extension are being used.
Otherwise the package discovery extensions which provide a default value are used.</p>
</div>
<div class="section" id="packageidentificationextensionpoint">
<h2>PackageIdentificationExtensionPoint<a class="headerlink" href="#packageidentificationextensionpoint" title="Permalink to this headline"></a></h2>
<p>This extension point is used by package discovery extensions.
A package identification extension determines if a given path contains a package and returns the tuple path, name, and type.</p>
<p>Package identification extensions are grouped by their priority.
The extensions are invoked in order of their priority and the first extension successfully identifying a package stops further extensions from being considered.</p>
<p>If multiple extensions have the same priority they are all invoked.
If more than one extension within the priority group identifies the package in the given path the result must be identical or a warning is printed and the path is skipped.</p>
</div>
<div class="section" id="packageaugmentationextensionpoint">
<h2>PackageAugmentationExtensionPoint<a class="headerlink" href="#packageaugmentationextensionpoint" title="Permalink to this headline"></a></h2>
<p>This extension point is used by verb extensions after packages have been discovered and identified.
A package augmentation extension can add arbitrary information to a package descriptor, like additional dependencies.</p>
</div>
<div class="section" id="packageselectionextensionpoint">
<h2>PackageSelectionExtensionPoint<a class="headerlink" href="#packageselectionextensionpoint" title="Permalink to this headline"></a></h2>
<p>This extension point is used by verb extensions after packages have been discovered, identified, and augmented.
Each package selection extension adds command line arguments which are grouped in the “Package selection arguments” section of the usage help.</p>
<p>By default all packages are selected.
Each extension can select / unselect matching package decorators based on the passed arguments.
If arguments for multiple extensions are being passed the combined boolean flag is a logical <code class="docutils literal notranslate"><span class="pre">AND</span></code> combination.</p>
</div>
<div class="section" id="taskextensionpoint">
<h2>TaskExtensionPoint<a class="headerlink" href="#taskextensionpoint" title="Permalink to this headline"></a></h2>
<p>This extension point is used by verb extensions after packages have been discovered, identified, and augmented.
Each task extension implements the logic for the combination of a <code class="docutils literal notranslate"><span class="pre">verb</span></code> and a <code class="docutils literal notranslate"><span class="pre">package</span> <span class="pre">type</span></code>, e.g. building a Python package.</p>
<p>In order to be invoked a task extension needs parameters provided by a context object.
A job object brings those two together.</p>
</div>
<div class="section" id="executorextensionpoint">
<h2>ExecutorExtensionPoint<a class="headerlink" href="#executorextensionpoint" title="Permalink to this headline"></a></h2>
<p>This extension point is used by some verb extensions to execute a set of jobs.
The executor extension with the highest priority is used by default.</p>
</div>
<div class="section" id="shellextensionpoint">
<h2>ShellExtensionPoint<a class="headerlink" href="#shellextensionpoint" title="Permalink to this headline"></a></h2>
<p>This extension point is used by some task extensions to generate shells scripts to setup the environment or create environment hooks for each supported shell.
Each extension implements the logic for a specific shell.
For the primary shells each extension also provides the environment to run commands.</p>
</div>
<div class="section" id="environmentextensionpoint">
<h2>EnvironmentExtensionPoint<a class="headerlink" href="#environmentextensionpoint" title="Permalink to this headline"></a></h2>
<p>This extension point is used by some task extensions as well as shell extensions to create environment hooks for each supported shell.
Each extension creates environment hooks for a specific environment variable and uses the shell extensions to generate scripts for each supported shell.</p>
</div>
<div class="section" id="eventhandlerextensionpoint">
<h2>EventHandlerExtensionPoint<a class="headerlink" href="#eventhandlerextensionpoint" title="Permalink to this headline"></a></h2>
<p>This extension point defines how events are handled.
An event can be any kind of object, like a line of output, a job starting, progressing or ending, or a command executing.
Every event is dispatched to all extensions in order of their priority.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="program-flow.html" class="btn btn-neutral float-left" title="Program flow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="contribution.html" class="btn btn-neutral float-right" title="Contributions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, Dirk Thomas, licensed under the Creative Commons Attribution 4.0.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>